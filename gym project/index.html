<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gym Landing Page‚õπÔ∏è‚Äç‚ôÄÔ∏è</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="utils.css" />
</head>
<body class="overflow-x-hidden">
    <div class="container mx-auto">
        <header>
            <nav class="flex justify-between">
                <div class="logo font-bold flex items-center bg-red text-blue">
                    Chandu Fitness
                </div>
                <ul class="navbar flex items-center">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><button id="loginBtn" class="btn">Login</button></li>
                    <li><button id="joinNowBtn" class="btn">Join Now!</button></li>
                    <li><button id="userBtn" class="btn">User</button></li>
                    <li><button id="adminBtn" class="btn">Admin</button></li> <!-- Admin Button -->
                </ul>
            </nav>
            <hr />
        </header>

        <!-- Home Section -->
        <main id="home" class="min-h-screen">
            <section class="section1">
                <div class="flex">
                    <div class="topleft flex flex-col justify-center px-2">
                        <div class="text-center">
                            <img class="dumbellimg" src="dumbell.png" alt="" />
                        </div>
                        <h1 class="my-1 text-center">The Best Fitness GYM!</h1>
                        <!-- <p class="text-center">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p> -->
                    </div>
                    <div class="topright flex justify-center">
                        <img class="gymimg" src="gympic.jpg" alt="" />
                    </div>
                </div>
            </section>
        </main>

        <!-- About Section -->
        <section id="about" class="section2">
            <h1 class="text-center my-2">About Us</h1>
            <p class="my-2">At Chandu Fitness, we believe that fitness is more than just a goal‚Äîit's a lifestyle. Our training program is designed to help individuals of all fitness levels achieve their health and wellness aspirations. With expert trainers, personalized programs, diet plans and a welcoming community, we are dedicated to supporting you every step of the way. Join us to start your fitness journey and become part of a vibrant, results-driven environment. ü¶æ</p>
        </section>

        <!-- Services Section -->
        <section id="services" class="section2">
            <h1 class="text-center my-2">Our Services</h1>
            <p class="my-2">At Chandu Fitness, we provide a wide range of programs.
                <ul>
                    <li>Zumba</li>
                    <li>Aerobics</li>
                    <li>Cardio</li>
                    <li>Weight training</li>
                    <li>Gymnastics</li>
                    <li>Yoga</li>
                </ul>
            </p>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section2">
            <h1 class="text-center my-2">Contact Us</h1>
            <p class="my-2">Email: contact@chandufitness.com</p>
            <p class="my-2">Phone: +123 456 7890</p>
            <p class="my-2">Address: Delhi, India.</p>
        </section>

        <!-- Messages Section -->
        <section id="messages" class="section2">
            <h1 class="text-center my-2">Messages</h1>
            <div id="messageContainer" class="my-2">
                <!-- Messages will be displayed here -->
            </div>
            <form id="messageForm" class="my-2">
                <label for="messageInput">Admin Message:</label>
                <input type="text" id="messageInput" placeholder="Type your message here" required />
                <button type="submit" class="btn">Send Message</button>
            </form>
        </section>

        <!-- Pop-up Form for Join Now -->
        <div id="joinFormPopup" class="popup-form">
            <div class="form-container">
                <span class="close-btn" id="closeForm">&times;</span>
                <h2>Join Chandu Fitness</h2>
                <form id="joinForm">
                    <label for="name">Full Name:</label>
                    <input type="text" id="uname" placeholder="Enter your name" required />
                    <label for="email">Email:</label>
                    <input type="email" id="emaile" placeholder="Enter your email" required />
                    <label for="address">Address:</label>
                    <input type="text" id="address" placeholder="Enter your address" required />
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" placeholder="Enter your phone number" required />
                    <label for="nationality">Nationality:</label>
                    <select id="nationality" required>
                        <option value="" disabled selected>Select your nationality</option>
                        <option value="India">India</option>
                        <option value="Sri Lanka">Sri Lanka</option>
                        <option value="Nepal">Nepal</option>
                        <option value="Japan">Japan</option>
                        <option value="America">America</option>
                    </select>
                    <button type="submit" class="btn" id="submit">Submit</button>
                </form>
            </div>
        </div>

        <!-- Pop-up Form for Login -->
        <div id="loginFormPopup" class="popup-form">
            <div class="form-container">
                <span class="close-btn" id="closeLoginForm">&times;</span>
                <h2>Login to Chandu Fitness</h2>
                <form id="loginForm">
                    <label for="loginName">Full Name:</label>
                    <input type="text" id="loginName" placeholder="Enter your name" required />
                    <label for="loginAddress">Address:</label>
                    <input type="text" id="loginAddress" placeholder="Enter your address" required />
                    <button type="submit" class="btn" id="loginSubmit">Login</button>
                </form>
            </div>
        </div>

        <!-- Footer Section -->
        <footer class="footer">
            <div class="footer-container">
                <div class="footer-section about">
                    <h2>About Us</h2>
                    <p>At Chandu Fitness, we believe that fitness is more than just a goal.</p>
                </div>
                <div class="footer-section links">
                    <h2>Quick Links</h2>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#contact">Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-section contact">
                    <h2>Contact Us</h2>
                    <p><i class="fas fa-envelope"></i> contact@chandufitness.com</p>
                    <p><i class="fas fa-phone"></i> +123 456 7890 <br /> Address: Delhi, India.</p>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2024 Chandu Fitness | Designed by Chandu
            </div>
        </footer>
    </div>

    <!-- Include your JavaScript file -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getDatabase, ref, set, get, update, remove, child } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBs5dilMDHrWjDZXE-y4l7hW6JtdlQEI_8",
            authDomain: "gym-management-system-e340c.firebaseapp.com",
            projectId: "gym-management-system-e340c",
            databaseURL: "https://gym-management-system-e340c-default-rtdb.asia-southeast1.firebasedatabase.app/",
            storageBucket: "gym-management-system-e340c.appspot.com",
            messagingSenderId: "1000657710027",
            appId: "1:1000657710027:web:a70b0e5d8125d735c9a44e",
            measurementId: "G-6BVHWQ6183",
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Handle Join Now form submission
        document.getElementById("joinForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const fullName = document.getElementById("uname").value;
            const email = document.getElementById("emaile").value;
            const address = document.getElementById("address").value;
            const phone = document.getElementById("phone").value;
            const nationality = document.getElementById("nationality").value;

            // Save user data to Firebase
            set(ref(db, "users/" + fullName), {
                FullName: fullName,
                Email: email,
                Address: address,
                PhoneNumber: phone,
                Nationality: nationality,
                Role: "User" // Default role for join now
            }).then(() => {
                alert("Registration successful!");
                document.getElementById("joinForm").reset();
                document.getElementById("joinFormPopup").style.display = "none";
            }).catch((error) => {
                alert("Error: " + error.message);
            });
        });

        // Handle login form submission
        document.getElementById("loginForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const loginName = document.getElementById("loginName").value;
            const loginAddress = document.getElementById("loginAddress").value;

            get(child(ref(db), "users/" + loginName)).then((snapshot) => {
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    if (userData.Address === loginAddress) {
                        alert(`Namaste! Welcome to your home page, ${userData.FullName}!`);
                        // Redirect based on role
                        window.location.href = userData.Role === "Admin" ? "admin_dashboard.html" : "user_dashboard.html";
                    } else {
                        alert("Address does not match.");
                    }
                } else {
                    alert("User not found.");
                }
            }).catch((error) => {
                alert("Error: " + error.message);
            });
        });

        // Admin button functionality
        document.getElementById("adminBtn").addEventListener("click", function () {
            window.location.href = "admin_dashboard.html";
        });

        // User button functionality
        document.getElementById("userBtn").addEventListener("click", function () {
            window.location.href = "user_dashboard.html";
        });

        // Pop-up form display logic for Join Now
        document.getElementById("joinNowBtn").addEventListener("click", () => {
            document.getElementById("joinFormPopup").style.display = "block";
        });

        document.getElementById("closeForm").addEventListener("click", () => {
            document.getElementById("joinFormPopup").style.display = "none";
        });

        // Pop-up form display logic for Login
        document.getElementById("loginBtn").addEventListener("click", () => {
            document.getElementById("loginFormPopup").style.display = "block";
        });

        document.getElementById("closeLoginForm").addEventListener("click", () => {
            document.getElementById("loginFormPopup").style.display = "none";
        });

        // Close pop-up when clicking outside the form
        window.addEventListener("click", (event) => {
            if (event.target === document.getElementById("joinFormPopup")) {
                document.getElementById("joinFormPopup").style.display = "none";
            } else if (event.target === document.getElementById("loginFormPopup")) {
                document.getElementById("loginFormPopup").style.display = "none";
            }
        });

        // Handle Message form submission (admin)
        document.getElementById("messageForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const messageText = document.getElementById("messageInput").value;
            const messageId = new Date().getTime(); // Unique message ID

            set(ref(db, "messages/" + messageId), {
                Message: messageText,
                Timestamp: new Date().toISOString()
            }).then(() => {
                alert("Message sent!");
                document.getElementById("messageInput").value = "";
                fetchMessages();
            }).catch((error) => {
                alert("Error: " + error.message);
            });
        });

        // Fetch and display messages
        function fetchMessages() {
            get(child(ref(db), "messages/")).then((snapshot) => {
                if (snapshot.exists()) {
                    const messages = snapshot.val();
                    const messageContainer = document.getElementById("messageContainer");
                    messageContainer.innerHTML = ""; // Clear previous messages

                    Object.keys(messages).forEach((messageId) => {
                        const messageData = messages[messageId];
                        const messageDiv = document.createElement("div");

                        messageDiv.innerHTML = `
                            <p>${messageData.Message}</p>
                            <p><small>${new Date(messageData.Timestamp).toLocaleString()}</small></p>
                            <button onclick="editMessage('${messageId}', '${messageData.Message}')">Edit</button>
                            <button onclick="deleteMessage('${messageId}')">Delete</button>
                            <hr>
                        `;
                        messageContainer.appendChild(messageDiv);
                    });
                } else {
                    document.getElementById("messageContainer").innerHTML = "<p>No messages yet.</p>";
                }
            }).catch((error) => {
                console.error("Error fetching messages:", error);
            });
        }

        // Edit message
        window.editMessage = function (messageId, currentMessage) {
            const newMessage = prompt("Edit your message:", currentMessage);
            if (newMessage) {
                update(ref(db, "messages/" + messageId), {
                    Message: newMessage,
                    Timestamp: new Date().toISOString()
                }).then(() => {
                    alert("Message updated!");
                    fetchMessages();
                }).catch((error) => {
                    alert("Error: " + error.message);
                });
            }
        };

        // Delete message
        window.deleteMessage = function (messageId) {
            if (confirm("Are you sure you want to delete this message?")) {
                remove(ref(db, "messages/" + messageId)).then(() => {
                    alert("Message deleted!");
                    fetchMessages();
                }).catch((error) => {
                    alert("Error: " + error.message);
                });
            }
        };

        // Fetch messages on page load
        fetchMessages();
    </script>
</body>
</html>
